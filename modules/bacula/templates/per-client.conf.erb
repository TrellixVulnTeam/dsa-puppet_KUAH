##
## THIS FILE IS UNDER PUPPET CONTROL. DON'T EDIT IT HERE.
## USE: git clone git+ssh://$USER@puppet.debian.org/srv/puppet.debian.org/git/dsa-puppet.git
##
#  For Bacula release 5.0.1 (24 February 2010) -- debian 5.0.4

Job {
  Name = "<%= client %>"
  JobDefs = "Standardbackup"
  Client = <%= bacula_client_name %>

  #Rerun Failed Levels = yes
  Reschedule On Error = yes
  Reschedule Interval = 4 hours
  Reschedule Times = 2

  Cancel Lower Level Duplicates = yes
  Cancel Queued Duplicates = yes
}

# Client (File Services) to backup
Client {
  Name = <%= bacula_client_name %>
  Address = <%= client %>
  FDPort = <%= bacula_client_port %>
  Catalog = MyCatalog
  Password = "<%= bacula_client_secret %>"
  File Retention = 30 days            # 30 days
  Job Retention = 6 months            # six months
  AutoPrune = yes                     # Prune expired Jobs/Files

  Heartbeat Interval = 180

  TLS Enable = yes
  TLS Require = yes
  TLS CA Certificate File = "<%= bacula_ca_path %>"
  # This is a client certificate, used by the director to connect to the client's file daemon
  TLS Certificate = "<%= bacula_ssl_client_cert %>"
  TLS Key = "<%= bacula_ssl_client_key %>"
}
