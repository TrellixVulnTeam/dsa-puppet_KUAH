##
### THIS FILE IS UNDER PUPPET CONTROL. DON'T EDIT IT HERE.
### USE: git clone git+ssh://$USER@puppet.debian.org/srv/puppet.debian.org/git/dsa-puppet.git
###

<%=
nameservers = []
searchpaths = []
resolvconf  = ''

if %w{draghi liszt widor spohr samosa}.include?(hostname)
  nameservers << "127.0.0.1"
end

nameservers += hosterinfo['nameservers'] if hosterinfo['nameservers']
searchpaths += hosterinfo['searchpaths'] if hosterinfo['searchpaths']

searchpaths << "debian.org"

if nameservers.empty?
  raise Puppet::ParseError, "Something has gone wrong writing resolv.conf: probably included for wrong hoster"
end

resolvconf += "search " + searchpaths.join(" ") + "\n"
nameservers.each do |ns|
  resolvconf += "nameserver " + ns + "\n"
end

resolvconf
%>
